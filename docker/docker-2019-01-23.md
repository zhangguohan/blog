###新建守护式容器的进程
[root@localhost /]# sudo docker run  --name daemon_dave -d  ubuntu /bin/bash -c "while true;do echo hello world; sleep 1; done"


[root@localhost /]# 


###查看容器运行情况

[root@localhost /]# docker ps -a  

CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES  
38ee6cd3a998        ubuntu              "/bin/bash -c 'whi..."   47 seconds ago      Up 47 seconds                                  daemon_dave  
a1a9f481ee44        ubuntu              "/bin/bash"              37 minutes ago      Exited (0) 4 minutes ago   practical_bassi


[root@localhost /]#



###执行容器中运行后台任务


[root@localhost ~]# docker exec -d daemon_dave touch /etc/kk


###附着到容上


[root@localhost ~]# docker attach daemon_dave

###查看守护式容器的进程



[root@localhost ~]# docker top daemon_dave
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                4937                4920                0                   06:40               ?                   00:00:00            /bin/bash -c while true;do echo hello world; sleep 1; done
root                7284                4937                0                   06:52               ?                   00:00:00            sleep 1

[root@localhost ~]# 


###Docker统计信息


[root@localhost ~]# docker stats daemon_dave

CONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
daemon_dave         0.20%               360 KiB / 7.623 GiB   0.00%               648 B / 648 B       0 B / 0 B           2

CONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
daemon_dave         0.20%               360 KiB / 7.623 GiB   0.00%               648 B / 648 B       0 B / 0 B           2

CONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
daemon_dave         0.20%               356 KiB / 7.623 GiB   0.00%               648 B / 648 B       0 B / 0 B           2

CONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
daemon_dave         0.20%               356 KiB / 7.623 GiB   0.00%               648 B / 648 B       0 B / 0 B           2




###在容器内运行交互命令  
 
[root@localhost ~]# docker exec -t -i daemon_dave /bin/bash  

root@38ee6cd3a998:/#  


###停止正在运行的Docker容器

[root@localhost ~]# docker stop daemon_dave

daemon_dave

[root@localhost ~]#  


###启动正在运行的Docker容器

[root@localhost ~]# docker start daemon_dave

daemon_dave

[root@localhost ~]#  


###重启正在运行的Docker容器

[root@localhost ~]# docker restart daemon_dave

daemon_dave

[root@localhost ~]# 

###新建自动重启容器  

* 如果由于错误而导致容器停止运行时，可以通过--restart标志，让Docker容器重新启动

[root@localhost ~]# sudo docker run --restart=always  --name daemon_dave -d  ubuntu /bin/bash -c "while true;do echo hello world; sleep 1; done"

* 添加on-failure还按胺一个可选的重启次数参数：--restart=on-failure:5 重启5次

###深入容器





 
























------------------
apt-get update && apt-get install vim
apt-get install net-tools